---

- include_tasks: ldap_server.yml
  when: "'ldapservers' in group_names"

- include_tasks: configure_ldap.yml
  when: "'ldapservers' in group_names"

- name: "OpenLDAP :: Configure LDAP Client [Debian]"
  include_tasks: ldap_client_debian.yml
  when: ansible_os_family == "Debian"

- name: "OpenLDAP :: Configure LDAP Client [RedHat]"
  include_tasks: ldap_client_redhat.yml
  when: ansible_os_family == "RedHat"

- include_tasks: ldap_automount.yml
  when:
    - "'ldapservers' in group_names"
    - shared_storage

- include_tasks: ldap_users.yml
  when:
    - "'ldapservers' in group_names"

- include_tasks: smbd_server.yml
  when:
    - "'samba' in group_names"

- include_tasks: configure_smb.yml
  when:
    - "'samba' in group_names"
